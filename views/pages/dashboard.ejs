<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://product-gallery.cloudinary.com/latest/all.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.js"></script>
    <script src="https://kit.fontawesome.com/6bb208eccf.js" crossorigin="anonymous"></script>
    <style>
        body {
            background: transparent;
        }
        .ui.sidebar {
            z-index: 1000;
            height: 100%;
            width: 200px !important;
            padding-top: 45px;
        }
        .pusher {
            margin-left: 200px; /* Ensure content pushes to the right of the sidebar */
        }
        .gallery-wrapper {
            max-width: 50%; /* Adjust width as needed */
            margin: 100px auto; /* Center it horizontally */
            background-color: gainsboro; /* Background color for the gallery */
            padding: 5px; /* Add padding around the gallery */
            border-radius: 10px; /* Optional: round the corners */
            box-shadow: 0 4px 0px rgba(0, 0, 0, 0.1); /* Optional: add a subtle shadow */
        }
        #myGallery {
            width: 60%; /* Take full width of the wrapper */
            padding: 0; /* Remove padding */
            margin: 0; /* Remove margin */
        }
        #myGallery img {
            max-width: 100%; /* Make the image responsive */
            height: auto; /* Maintain aspect ratio */
            display: block; /* Remove any inline spacing */
          
        }
    </style>
</head>
<body>
    <div id="header">
        <div class="ui borderless fixed menu" style="background-color: gainsboro;">
            <a class="item" style="font-weight: bold; color: black;">Crata</a>
            <a class="item" id="menu-toggle"><i class="bars icon"></i></a>
            <a href="/dashboard" class="item" style="font-weight: bold; color: black;">
                <i class="fa-solid fa-house"></i> Dashboard
            </a>
        </div>
    </div>

    <div class="ui sidebar vertical menu" style="background-color: gainsboro;">
        <a class="item">Roadmap</a>
        <a href="/viewpending" class="item">Pending</a>
        <a href="/capture" class="item">Data Capture</a>
        <a href="/visits" class="item">Visitation</a>
        <a class="item">Wallet</a>
        <a href="/profile" class="item">Profile</a>
        <a href="/logout" class="item">Logout</a>
    </div>

    <script>
        $(document).ready(function() {
            // Initialize the sidebar
            $('.ui.sidebar').sidebar({
                transition: 'overlay',
                style: 'push'
            });

            // Toggle sidebar on menu button click
            $('#menu-toggle').click(function() {
                $('.ui.sidebar').sidebar('toggle');
            });
        });
    </script>

    <div class="pusher">
        <h1>Welcome to your Dashboard</h1>
        <p>Welcome <%= userTag ? userTag : 'No tag found' %></p>
        <div class="gallery-wrapper">
            <div id="myGallery"></div>
        </div>
        <script type="text/javascript">
            $(document).ready(function() {
                const userTag = <%- JSON.stringify(userTag) %>;
                if (userTag) {
                    const myGallery = cloudinary.galleryWidget({
                        container: "#myGallery",
                        cloudName: "iyu",
                        default: {
                            theme: 'default'
                        },
                        mediaAssets: [{ tag: userTag }]
                    });
                    myGallery.render();
                } else {
                    console.error('No tag found for user.');
                }
            });
        </script>
    </div>
</body>
</html>
